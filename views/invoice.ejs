<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volk & David Management Systems</title>


    <!-- font awesome files -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <!-- jquery link -->
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>

    <!-- bootstrap CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


    <link rel="stylesheet" type="text/css" href="/assets/css/register.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/index.css">



</head>



<body>



    <!-- header section -->
    <%- include("partials/header.ejs") %>

        <!-- main content section start -->
        <section class="mainSection container" style=" padding: 0px; margin: auto;">

            <!-- left side bar -->
            <%- include("partials/sideBar.ejs") %>



                <!-- main container -->
                <div class="mainContentBar mt-2">

                    <div class="notificationOuterBox">

                        <div class="notificationBoxHeader">
                            <span class="headerTitle">
                                Invoice <span></span>
                            </span>
                            <!-- <div class="MainBoxHeaderButtons">

                                <button id="downloadPDFBtn">
                                    <i class="fas fa-arrow-down"></i> Download (.pdf)
                                </button>
                               
                            </div> -->
                        </div>

                        <hr>

                        <div class="notificationContentBox ">

                            <div class="invoiceHeader">
                                <div class="invoiceLogo">
                                    <img src="/uploads/<%=currentInvoice.companyLogo%>">
                                </div>
                                <div class="invoiceTitle">
                                    <h3>Invoice</h3>
                                </div>

                            </div>

                            <hr>

                            <div class="mainInvoiceContentSection">

                                <div class="invoiceSummary ownerDetials" style="font-size: 15px;">
                                    <h3>Invoice From</h3>
                                    <div class="invoiceDeteDetialsItem" style="border: none;">
                                        
                                        <span >
                                           <h3><%=currentInvoice.OwnName%></h3>
                                        </span>
                                    </div>
                                    <div class="invoiceDeteDetialsItem" style="border: none;">
                                        
                                        <span >
                                            <%=currentInvoice.OwnAddress%>
                                        </span>
                                    </div>
                                    <div class="invoiceDeteDetialsItem" style="border: none;">
                                    
                                        <span >
                                            <%=currentInvoice.OwnPhone%>
                                        </span>
                                    </div>
                                    <div class="invoiceDeteDetialsItem" style="border: none;">
                                      
                                        <span >
                                            <%=currentInvoice.OwnEmail%>
                                        </span>
                                    </div>
                                    
                                </div>

                                

                                <div class="invoiceDate">
                                    <h6>Invoice Details</h6>
                                    <div class="invoiceDeteDetials">
                                        <div class="invoiceNumberBox">
                                                <span class="invoiceDateTitle">NTN No:</span>
                                                <span>
                                                    <%=currentInvoice.NTNNumber%>
                                                </span>
                                               
                                        </div>
                                        
                                        <div class="invoiceDeteDetialsItem">
                                            <span class="invoiceDateTitle">INC No:</span>
                                        <span>
                                            <%=currentInvoice.INCNumber%>
                                        </span>
                                        </div>
                                        <div class="invoiceDeteDetialsItem">
                                            <span class="invoiceDateTitle">Invoice No:</span>
                                            <span>
                                                <%=currentInvoice.InvoiceNo%>
                                            </span>
                                        </div>

                                        <div class="invoiceDeteDetialsItem">
                                            <span class="invoiceDateTitle">Date:</span>
                                            <span>
                                                    <%=currentInvoice.date%>
                                            </span>
                                        </div>
                                        <div class="invoiceDeteDetialsItem invoiceAmmount">
                                            <span class="invoiceDateTitle">Ammount Due:</span>
                                            <span>
                                                <%=currentInvoice.GrandTotal%>.00
                                            </span>
                                        </div>

                                    </div>
                                </div>

                            </div>
                            <hr>

                            
                            <div class="billToBox">
                                <h3>Invoice To</h3>
                                <h4 class="billToName">
                                    <%=currentInvoice.ToName%>
                                </h4>
                                <p> <span>
                                        <%=currentInvoice.ToAddress%>
                                    </span></p>
                                <p><span>
                                        <%=currentInvoice.ToPhone%>
                                    </span></p>
                                <p><span>
                                        <%=currentInvoice.ToEmail%>
                                    </span></p>
                               
                            </div>


                            <div class="tableOuterBox">
                                <table class="invoiceTable mt-5">
                                    <thead>
                                        <tr>
                                            <th>
                                                Sr
                                            </th>
                                            <th>
                                                Description
                                            </th>
                                            <th>
                                                Qty
                                            </th>
                                            <th>
                                                Unit Price
                                            </th>
                                            <th>
                                                Total Price
                                            </th>
                                            <th>
                                                Discount
                                            </th>
                                            <th>
                                                Net Price
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <%for(var x=0; x < InvoiceItem.length; x++){%>
                                            <tr>
                                                <td>
                                                    <%=[x+1]%>
                                                </td>
                                                <td class="invoiceItemDescriptionBox">
                                                   
                                                        <%=InvoiceItem[x].itemDes_0%>
                                                    
                                                </td>
                                                <td>
                                                    <%=InvoiceItem[x].itemQty_0%>

                                                </td>
                                                <td>
                                                    <%=InvoiceItem[x].itemUnitePrice_0%>.00
                                                </td>
                                                <td>
                                                    <%=InvoiceItem[x].totalPrice_0%>.00
                                                </td>
                                                <td>
                                                    <%=InvoiceItem[x].discount_0%>
                                                </td>
                                                <td>
                                                    <%=InvoiceItem[x].netPrice_0%>.00
                                                </td>
                                            </tr>
                                            <%}%>
                                    </tbody>
                                </table>
                            </div>
                            <div class="invoiceSummaryBox mt-2">


                                <div class="invoiceSummary" style="margin-left: auto;">
                                    <h3>Summary</h3>
                                    <div class="invoiceDeteDetialsItem">
                                        <span class="invoiceDateTitle"> SubTotal:</span>
                                        <span>
                                            <%=currentInvoice.SubTotal%>.00
                                        </span>
                                    </div>
                                    <div class="invoiceDeteDetialsItem">
                                        <span class="invoiceDateTitle"> Tax:</span>
                                        <span>
                                            <%=currentInvoice.Tax%>.00
                                        </span>
                                    </div>
                                    <div class="invoiceDeteDetialsItem">
                                        <span class="invoiceDateTitle">Total</span>
                                        <span>
                                            <%=currentInvoice.GrandTotal%>.00
                                        </span>
                                    </div>
                                </div>




                            </div>
                          
                            <hr>
                            <div class="invoiceSummaryBox mt-2">


                                <div class="invoiceSummary" style="margin-right: auto;">
                                    <h3>Payment Method</h3>
                                    <div class="invoiceDeteDetialsItem">
                                        <span class="invoiceDateTitle"> <%=currentInvoice.Payment_Method%></span>
                                        <!-- <span>
                                            <%=currentInvoice.SubTotal%>.00
                                        </span> -->
                                    </div>
                                    <div class="invoiceDeteDetialsItem">
                                        <span class="invoiceDateTitle">Account Title</span>
                                        <span>
                                            <%=currentInvoice.Account_Title%>
                                        </span>
                                    </div>
                                    <div class="invoiceDeteDetialsItem">
                                        <span class="invoiceDateTitle"> Accoutn Numer:</span>
                                        <span>
                                            <%=currentInvoice.Account_Number%>
                                        </span>
                                    </div>
                                </div>


                                <div class="signatureLogo">
                                    <img src="/uploads/<%=currentInvoice.signature%>">
                                </div>

                            </div>

                            
                            <hr>
                            

                            <div class="MainBoxHeaderButtons">
                                <button id="downloadPDFBtn" class="btn btn-primary">
                                    Download <i class="fas fa-arrow-down"></i> 
                                </button>
                            </div>

                            <div class="MainBoxHeaderButtons closePreviweBtn">
                                <button id="downloadPDFBtn" class="btn btn-primary">
                                    Close
                                </button>
                            </div>
                        </div>

                    </div>



                    <footer class="mt-5">

                        <div>
                            <p>
                                copyright 2021
                            </p>
                        </div>
                        <div>
                            <p>
                                Made by wide range digital services
                            </p>
                        </div>
                    </footer>
                </div>


        </section>

</body>
<!-- Jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Owl Carousel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.min.js"></script>

<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
    integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- Slick slider JS -->
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>


<script>

    // convert element to pdf 
    function generatePDF() {
        var invoiceElm = document.getElementsByClassName('notificationContentBox')[0];
            
        $('#downloadPDFBtn').click(function () {
            $('.notificationContentBox').addClass('printableInvoice')
          
            $('#downloadPDFBtn').css('display',"none")
            // var options = {
            //     margin: 1,
            //     filename: 'invoice.pdf',
            //     imge: { type: "jpeg", quality: 0.98 },
            //     html2canvas: { scale: 2 },
            //     jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            // }
            // html2pdf().set(options).from(invoiceElm).save()

            window.print(invoiceElm)
        })


        $('.notificationContentBox').click(function () {
            $('.notificationContentBox').removeClass('printableInvoice')
            $('#downloadPDFBtn').css('display',"block")
        })
    }
    generatePDF()




    var dropDownAble = document.getElementsByClassName('dropDownAble');
    dropDownAble = Array.from(dropDownAble)
    dropDownAble.forEach(function (elm, index) {
        elm.addEventListener('click', function () {
            $(`#slideMenu_${index + 1}`).slideToggle();
            $('.dropDownIcone').eq(index).toggleClass('rotate')
        })
    })


    //  When user click on user profile icone in header 
    $('.headerUserProfileImg').click(function () {
        $('.profileDteialsDropDown').slideToggle()
    });



    $('.menuBtn').click(function () {
        $('.leftSideBarBox').addClass('container');
        $('.sideBar').slideToggle('slow');

    })

</script>

</html>